# HTTP
quarkus.http.port=8080

# MongoDB
quarkus.mongodb.database=recipebook
# Use DevServices in dev/test; override with env var in prod
quarkus.mongodb.devservices.enabled=true
# If running externally, set: MONGODB_CONNECTION_STRING=mongodb://localhost:27017
%prod.quarkus.mongodb.connection-string=${MONGODB_CONNECTION_STRING}

# Liquibase MongoDB
quarkus.liquibase-mongodb.migrate-at-start=true
quarkus.liquibase-mongodb.change-log=db/changelog/db.changelog-master.yaml

# OIDC / Keycloak
quarkus.oidc.auth-server-url=${OIDC_AUTH_SERVER_URL:http://localhost:8081/realms/recipe-realm}
quarkus.oidc.client-id=recipe-book-service
quarkus.oidc.credentials.secret=${OIDC_CLIENT_SECRET:secret}
quarkus.oidc.application-type=service
quarkus.oidc.devservices.enabled=true
quarkus.oidc.devservices.realm-path=keycloak/realm-export.json

# Security: permit swagger and health
quarkus.http.auth.permission.public.paths=/q/health/*,/q/openapi,/q/swagger-ui/*,/hello
quarkus.http.auth.permission.public.policy=permit
# Protect API by default
quarkus.http.auth.permission.api.paths=/api/*
quarkus.http.auth.permission.api.policy=authenticated

# OpenAPI
quarkus.smallrye-openapi.path=/q/openapi
quarkus.swagger-ui.always-include=true

# Logging
quarkus.log.category."io.quarkus.oidc".level=INFO
